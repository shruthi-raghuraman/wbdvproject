(this["webpackJsonpwbdv-sp20-group2-client-react"]=this["webpackJsonpwbdv-sp20-group2-client-react"]||[]).push([[0],{35:function(e,t,a){e.exports=a(64)},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(30),l=a.n(c),o=a(5),s=a(6),i=a(7),u=a(8),m=a(34),p=a(13),h=a(12),f=a.n(h),d=a(15),b=function(e){var t=e.msg;return r.a.createElement("div",{className:"alert alert-info alert-dismissible fade show",role:"alert"},t,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")))},v=a(17),E=a.n(v),g=function(){var e=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,e.next=4,E.a.get("https://api.edamam.com/search?app_id=8c82a996&app_key=4c99b8e052177acab7281af278080f6f&q=".concat(t,"&from=0&to=1"));case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("There's an error while fetching the data");case 10:return e.prev=10,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)("Choose File"),o=Object(p.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)({}),h=Object(p.a)(u,2),v=h[0],y=h[1],O=Object(n.useState)(""),j=Object(p.a)(O,2),w=j[0],N=j[1],k=Object(n.useState)([]),S=Object(p.a)(k,2),x=S[0],C=S[1],P=function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,c,l,o,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("file",a),e.prev=3,"https://limitless-anchorage-96439.herokuapp.com",e.next=7,E.a.post("".concat("https://limitless-anchorage-96439.herokuapp.com","/upload"),n,{headers:{"Content-Type":"multipart/form-data"}});case 7:return r=e.sent,c=r.data,l=c.fileName,o=c.filePath,s=c.resultSummaries,e.next=11,Promise.all(s.map(function(){var e=Object(d.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t.description);case 2:if(!((a=e.sent)&&a.data&&a.data.hits)){e.next=5;break}return e.abrupt("return",Object(m.a)({},t,{recipe:a.data.hits[0].recipe}));case 5:return e.abrupt("return",{label:t,recipe:null});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:i=e.sent,y({fileName:l,filePath:o}),C(i),N("File Uploaded"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log({err:e.t0});case 20:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,w?r.a.createElement(b,{msg:w}):null,r.a.createElement("form",{onSubmit:P},r.a.createElement("div",{className:"custom-file mt-4"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:function(e){c(e.target.files[0]),i(e.target.files[0].name)}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},s)),r.a.createElement("input",{type:"submit",value:"Upload",className:"btn btn-primary btn-block mt-4"})),v?r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-6 m-auto"},r.a.createElement("h3",{className:"text-center"},v.fileName),r.a.createElement("img",{style:{width:"100%"},src:v.filePath,alt:""}))):null,x.map((function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Guess: ",e.description),r.a.createElement("p",null,"Score: ",e.score),e.recipe&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Matched recipe: ",e.recipe.label),r.a.createElement("img",{src:e.recipe.image,alt:e.recipe.label})))})))},O=a(31),j=a(10),w=function(){return fetch("http://localhost:8080/logout",{method:"POST",credentials:"include"})},N=function(e){return fetch("http://localhost:8080/register",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))},k=function(e){return fetch("http://localhost:8080/login",{method:"POST",body:JSON.stringify(e),headers:{"content-type":"application/json"},credentials:"include"}).then((function(e){return e.json()}))},S=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",verifyPassword:""},e.handleRegister=function(t){return N(t).then((function(t){return e.props.history.push("/profile")}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("input",{value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},className:"form-control",placeholder:"username"}),r.a.createElement("input",{value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},className:"form-control",type:"password",placeholder:"password"}),r.a.createElement("input",{value:this.state.verifyPassword,onChange:function(t){return e.setState({verifyPassword:t.target.value})},className:"form-control",type:"password",placeholder:"verify password"}),r.a.createElement("button",{onClick:function(){return e.handleRegister(e.state)},className:"btn btn-primary btn-block"},"Register"))}}]),a}(r.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={profile:{username:"",password:"",firstName:"",lastName:"",email:"",roles:[]}},e.logout=function(){return w().then((function(t){e.props.history.push("/")}))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:8080/profile",{method:"POST",credentials:"include"}).then((function(e){return e.json()})).then((function(t){return e.setState({profile:t})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Profile"),"Hi ",this.state.profile.username,"!",r.a.createElement("hr",null),r.a.createElement("button",{onClick:this.logout,className:"btn btn-danger"},"Logout"))}}]),a}(r.a.Component),C=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleLogin=function(t){return k(t).then((function(t){return e.props.history.push("/profile")}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("input",{value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},className:"form-control",placeholder:"username"}),r.a.createElement("input",{value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},className:"form-control",type:"password",placeholder:"password"}),r.a.createElement("button",{onClick:function(){return e.handleLogin(e.state)},className:"btn btn-primary btn-block"},"Login"))}}]),a}(r.a.Component),P=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Home"),r.a.createElement("a",{href:"/upload"},"SearchPage"),r.a.createElement("br",null),r.a.createElement("a",{href:"/register"},"Register"),r.a.createElement("br",null),r.a.createElement("a",{href:"/profile"},"Profile"),r.a.createElement("br",null),r.a.createElement("a",{href:"/login"},"Login"))}}]),a}(r.a.Component),F=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement(j.a,{path:"/",exact:!0,component:P}),r.a.createElement(j.a,{path:"/register",exact:!0,component:S}),r.a.createElement(j.a,{path:"/profile",exact:!0,component:x}),r.a.createElement(j.a,{path:"/login",exact:!0,component:C}),r.a.createElement(j.a,{path:"/upload",exact:!0,component:y})))}}]),a}(r.a.Component),L=(a(63),function(){return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h4",{className:"display-4 text-center mt-4"},r.a.createElement("i",{className:"fas fa-cookie-bite"})," Recipes Finder"),r.a.createElement(F,null))});l.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.9bcee6d2.chunk.js.map